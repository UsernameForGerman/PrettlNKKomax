{"ast":null,"code":"import _objectSpread from\"/home/whatruska/PycharmProjects/PrettlNKKomax/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import task_api from\"../DAL/task/task_api\";import task_status from\"../DAL/task_status/task_status\";import{logoutThunk}from\"./authReducer\";import handle401 from\"./handle401\";var initialState={isFetching:false,tasksList:[],errMsg:\"\",isValid:true,canSend:false,status:{harnesses:[]}};var TOGGLE_FETCHING=\"TASKS/TOGGLE_FETCHING\";var SET_LIST=\"TASKS/TOGGLE_SET_LIST\";var SET_ERR_MSG=\"TASKS/ERROR\";var SET_VALID=\"TASKS/VALID\";var SET_CAN_SEND=\"TASKS/CAN_SEND\";var SET_STATUS=\"TASKS/SET_STATUS\";var tasksReducer=function tasksReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;var stateCopy=_objectSpread({},state);switch(action.type){case TOGGLE_FETCHING:{stateCopy.isFetching=!stateCopy.isFetching;break;}case SET_LIST:{stateCopy.tasksList=action.list;break;}case SET_ERR_MSG:{stateCopy.errMsg=action.error;break;}case SET_VALID:{stateCopy.isValid=action.isValid;break;}case SET_CAN_SEND:{stateCopy.canSend=action.canSend;break;}case SET_STATUS:{stateCopy.status=action.status;break;}}return stateCopy;};var toggleFetchAC=function toggleFetchAC(){return{type:TOGGLE_FETCHING};};var canSendAC=function canSendAC(send){return{type:SET_CAN_SEND,canSend:send};};var setListAC=function setListAC(list){return{type:SET_LIST,list:list};};var setValidAC=function setValidAC(isValid){return{type:SET_VALID,isValid:isValid};};var setErrorAC=function setErrorAC(error){return{type:SET_ERR_MSG,error:error};};var setStatusAC=function setStatusAC(status){return{type:SET_STATUS,status:status};};var getTasksThunk=function getTasksThunk(){return function(dispatch){dispatch(toggleFetchAC());task_api.getKomaxTasks().then(function(data){if(data===\"\")data=[];dispatch(setListAC(data));dispatch(toggleFetchAC());}).catch(function(err){handle401(err,dispatch);dispatch(toggleFetchAC());});};};var createTaskThunk=function createTaskThunk(task){return function(dispatch){dispatch(toggleFetchAC());task_api.createTask(task).then(function(data){dispatch(canSendAC(true));dispatch(toggleFetchAC());}).catch(function(err){handle401(err,dispatch);});};};var updateTaskThunk=function updateTaskThunk(task){return function(dispatch){dispatch(toggleFetchAC());task_api.updateTask(task).then(function(data){dispatch(getTasksThunk());dispatch(toggleFetchAC());}).catch(function(err){handle401(err,dispatch);});};};var getStatusThunk=function getStatusThunk(){return function(dispatch){task_status.getStatuses().then(function(resp){dispatch(setStatusAC(resp));}).catch(function(err){handle401(err,dispatch);});};};var deleteTaskThunk=function deleteTaskThunk(task){return function(dispatch){dispatch(toggleFetchAC());task_api.deleteTask(task).then(function(resp){dispatch(getTasksThunk());dispatch(toggleFetchAC());}).catch(function(err){handle401(err,dispatch);});};};export{tasksReducer,createTaskThunk,updateTaskThunk,getTasksThunk,setErrorAC,setValidAC,getStatusThunk,deleteTaskThunk};","map":{"version":3,"sources":["/home/whatruska/PycharmProjects/PrettlNKKomax/frontend/src/reducers/tasksReducer.js"],"names":["task_api","task_status","logoutThunk","handle401","initialState","isFetching","tasksList","errMsg","isValid","canSend","status","harnesses","TOGGLE_FETCHING","SET_LIST","SET_ERR_MSG","SET_VALID","SET_CAN_SEND","SET_STATUS","tasksReducer","state","action","stateCopy","type","list","error","toggleFetchAC","canSendAC","send","setListAC","setValidAC","setErrorAC","setStatusAC","getTasksThunk","dispatch","getKomaxTasks","then","data","catch","err","createTaskThunk","task","createTask","updateTaskThunk","updateTask","getStatusThunk","getStatuses","resp","deleteTaskThunk","deleteTask"],"mappings":"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","sourcesContent":["import task_api from \"../DAL/task/task_api\";\nimport task_status from \"../DAL/task_status/task_status\";\nimport {logoutThunk} from \"./authReducer\";\nimport handle401 from \"./handle401\";\nconst initialState = {\n    isFetching : false,\n    tasksList : [],\n    errMsg : \"\",\n    isValid : true,\n    canSend : false,\n    status : {\n        harnesses : []\n    }\n}\n\nconst TOGGLE_FETCHING = \"TASKS/TOGGLE_FETCHING\";\nconst SET_LIST = \"TASKS/TOGGLE_SET_LIST\";\nconst SET_ERR_MSG = \"TASKS/ERROR\";\nconst SET_VALID = \"TASKS/VALID\";\nconst SET_CAN_SEND = \"TASKS/CAN_SEND\";\nconst SET_STATUS = \"TASKS/SET_STATUS\";\n\nconst tasksReducer = (state = initialState, action) => {\n    let stateCopy = {...state};\n    switch (action.type) {\n        case TOGGLE_FETCHING : {\n            stateCopy.isFetching = !stateCopy.isFetching;\n            break;\n        }\n\n        case SET_LIST : {\n            stateCopy.tasksList = action.list;\n            break;\n        }\n\n        case SET_ERR_MSG : {\n            stateCopy.errMsg = action.error;\n            break;\n        }\n\n        case SET_VALID : {\n            stateCopy.isValid = action.isValid;\n            break;\n        }\n\n        case SET_CAN_SEND : {\n            stateCopy.canSend = action.canSend;\n            break;\n        }\n\n        case SET_STATUS : {\n            stateCopy.status = action.status;\n            break;\n        }\n    }\n    return stateCopy;\n}\n\nconst toggleFetchAC = () => {\n    return {\n        type : TOGGLE_FETCHING\n    }\n}\n\nconst canSendAC = (send) => {\n    return {\n        type : SET_CAN_SEND,\n        canSend : send\n    }\n}\n\nconst setListAC = (list) => {\n    return {\n        type : SET_LIST,\n        list : list\n    }\n}\n\nconst setValidAC = (isValid) => {\n    return {\n        type : SET_VALID,\n        isValid : isValid\n    }\n}\n\nconst setErrorAC = (error) => {\n    return {\n        type : SET_ERR_MSG,\n        error : error\n    }\n}\n\nconst setStatusAC = (status) => {\n    return {\n        type : SET_STATUS,\n        status : status\n    }\n}\n\nconst getTasksThunk = () => {\n    return (dispatch) => {\n        dispatch(toggleFetchAC());\n        task_api.getKomaxTasks().then((data) => {\n            if (data === \"\") data = [];\n            dispatch(setListAC(data));\n            dispatch(toggleFetchAC());\n        }).catch(err => {\n            handle401(err, dispatch);\n            dispatch(toggleFetchAC())\n        });\n    }\n}\n\nconst createTaskThunk = (task) => {\n    return (dispatch) => {\n        dispatch(toggleFetchAC());\n        task_api.createTask(task)\n            .then((data) => {\n                dispatch(canSendAC(true));\n                dispatch(toggleFetchAC());\n            })\n            .catch(err => {\n                handle401(err, dispatch);\n            });\n    }\n}\n\nconst updateTaskThunk = (task) => {\n    return (dispatch) => {\n        dispatch(toggleFetchAC());\n        task_api.updateTask(task)\n            .then((data) => {\n                dispatch(getTasksThunk());\n                dispatch(toggleFetchAC());\n            })\n            .catch(err => {\n                handle401(err, dispatch);\n            });\n    }\n}\n\nlet getStatusThunk = () => {\n    return (dispatch) => {\n        task_status.getStatuses()\n            .then(resp => {\n                dispatch(setStatusAC(resp));\n            })\n            .catch(err => {\n                handle401(err, dispatch);\n            });\n    }\n}\n\nlet deleteTaskThunk = (task) => {\n    return (dispatch) => {\n        dispatch(toggleFetchAC());\n        task_api.deleteTask(task)\n            .then(resp => {\n                dispatch(getTasksThunk());\n                dispatch(toggleFetchAC());\n            })\n            .catch(err => {\n                handle401(err, dispatch)\n            })\n    }\n}\n\nexport {tasksReducer, createTaskThunk, updateTaskThunk, getTasksThunk, setErrorAC, setValidAC, getStatusThunk, deleteTaskThunk}"]},"metadata":{},"sourceType":"module"}
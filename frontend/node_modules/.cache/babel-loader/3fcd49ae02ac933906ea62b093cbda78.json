{"ast":null,"code":"import _classCallCheck from\"/home/german/PycharmProjects/komax_prettl/PrettlNKKomax/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import axios from\"axios\";import BASE_URL from\"../getBaseUrl\";var API_URL=BASE_URL+\"api/v1/\";var API=function API(base_url){var _this=this;_classCallCheck(this,API);this.getToken=function(){var token=window.localStorage.getItem('token');if(!token){token=\"null\";}return token;};this.createAPI=function(){var baseUrl=arguments.length>0&&arguments[0]!==undefined?arguments[0]:API_URL;var token=_this.getToken();if(token===\"null\"){return axios.create({baseURL:baseUrl,headers:{\"Content-Type\":\"application/json\"}});}else{return axios.create({baseURL:baseUrl,headers:{\"Authorization\":\"Token \".concat(token),\"Content-Type\":\"application/json\"}});}};this.createMediaAPI=function(){var token=_this.getToken();if(token===\"null\"){return axios.create({baseURL:API_URL,headers:{\"Content-Type\":\"multipart/form-data\"}});}else{return axios.create({baseURL:API_URL,headers:{\"Authorization\":\"Token \".concat(token),\"Content-Type\":\"multipart/form-data\"}});}};this.formIdUrl=function(id){return _this.base_url+id;};this.getObjectList=function(){var params=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";return _this.createAPI().get(_this.base_url+params).then(function(resp){var data=resp.data;return data;});};this.getObjectById=function(id){var url=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_this.formIdUrl(id);return _this.createAPI().get(_this.formIdUrl(id)).then(function(resp){return resp.data;});};this.createObject=function(options){var url=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"\";var api=arguments.length>2&&arguments[2]!==undefined?arguments[2]:_this.createAPI();return api.post(_this.base_url+url,options).then(function(resp){return resp.data;});};this.deleteObject=function(id,options){return _this.createAPI().delete(_this.formIdUrl(id),options).then(function(resp){return resp.data;});};this.updateObject=function(id,options){return _this.createAPI().put(_this.formIdUrl(id)+\"/\",options).then(function(resp){return resp;});};this.base_url=API_URL+base_url;};export default API;","map":{"version":3,"sources":["/home/german/PycharmProjects/komax_prettl/PrettlNKKomax/frontend/src/DAL/api/api.js"],"names":["axios","BASE_URL","API_URL","API","base_url","getToken","token","window","localStorage","getItem","createAPI","baseUrl","create","baseURL","headers","createMediaAPI","formIdUrl","id","getObjectList","params","get","then","resp","data","getObjectById","url","createObject","options","api","post","deleteObject","delete","updateObject","put"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport BASE_URL from \"../getBaseUrl\";\n\nconst API_URL = BASE_URL + \"api/v1/\";\n\nclass API {\n    constructor(base_url) {\n        this.base_url = API_URL + base_url;\n    }\n\n    getToken = () => {\n        let token = window.localStorage.getItem('token');\n        if (!token){\n            token = \"null\";\n        }\n        return token;\n    }\n\n    createAPI = (baseUrl = API_URL) => {\n        let token = this.getToken();\n        if (token === \"null\"){\n            return axios.create({\n                baseURL : baseUrl,\n                headers : {\n                    \"Content-Type\" : \"application/json\"\n                }\n            });\n        } else {\n           return axios.create({\n                baseURL : baseUrl,\n                headers : {\n                    \"Authorization\": `Token ${token}`,\n                    \"Content-Type\" : \"application/json\",\n                }\n            });\n        }\n    }\n\n    createMediaAPI = () => {\n        let token = this.getToken();\n        if (token === \"null\"){\n            return axios.create({\n                baseURL : API_URL,\n                headers : {\n                    \"Content-Type\" : \"multipart/form-data\"\n                }\n            });\n        } else {\n           return axios.create({\n                baseURL : API_URL,\n                headers : {\n                    \"Authorization\": `Token ${token}`,\n                    \"Content-Type\" : \"multipart/form-data\",\n                }\n            });\n        }\n    }\n\n    formIdUrl = (id) => {\n        return this.base_url + id;\n    }\n\n    getObjectList = (params=\"\") => {\n        return this.createAPI().get(this.base_url + params).then((resp) => {\n            let data = resp.data;\n            return data;\n        });\n    }\n\n    getObjectById = (id, url = this.formIdUrl(id)) => {\n        return this.createAPI().get(this.formIdUrl(id)).then((resp) => {\n            return resp.data;\n        });\n    }\n\n    createObject = (options, url = \"\", api = this.createAPI()) => {\n        return api.post(this.base_url + url, options).then((resp) => {\n            return resp.data;\n        });\n    }\n\n    deleteObject = (id, options) => {\n        return this.createAPI().delete(this.formIdUrl(id), options).then((resp) => {\n            return resp.data;\n        });\n    }\n\n    updateObject = (id, options) => {\n        return this.createAPI().put(this.formIdUrl(id) + \"/\", options).then(resp => {\n            return resp;\n        })\n    }\n}\n\nexport default API;"]},"metadata":{},"sourceType":"module"}
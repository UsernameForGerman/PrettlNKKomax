{"ast":null,"code":"import _objectSpread from\"/home/german/PycharmProjects/komax_prettl/PrettlNKKomax/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import harnessApi from\"../DAL/harness/harnessApi\";import harness_chart_api from\"../DAL/harness_chart/harness_chart_api\";import handle401 from\"./handle401\";var initialState={isFetching:false,harnessesList:[],isMapFetching:false,selectedMap:[]};var TOGGLE_FETCHING=\"HARNESS/FETCHING\";var TOGGLE_MAP_FETCHING=\"HARNESS/MAP_FETCHING\";var SET_HARNESSES_LIST=\"HARNESS/SET_LIST\";var SET_SELECTED_MAP=\"HARNESS/SET_MAP\";var harnessesReducer=function harnessesReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;var stateCopy=_objectSpread({},state);switch(action.type){case TOGGLE_FETCHING:{stateCopy.isFetching=!stateCopy.isFetching;break;}case TOGGLE_MAP_FETCHING:{stateCopy.isMapFetching=!stateCopy.isMapFetching;break;}case SET_HARNESSES_LIST:{stateCopy.harnessesList=action.list;break;}case SET_SELECTED_MAP:{stateCopy.selectedMap=action.map;break;}}return stateCopy;};var toggleFetchingAC=function toggleFetchingAC(){return{type:TOGGLE_FETCHING};};var toggleMapFetchingAC=function toggleMapFetchingAC(){return{type:TOGGLE_MAP_FETCHING};};var setListAC=function setListAC(list){return{type:SET_HARNESSES_LIST,list:list};};var setMapAC=function setMapAC(map){return{type:SET_SELECTED_MAP,map:map};};var getHarnessesListThunk=function getHarnessesListThunk(){return function(dispatch){dispatch(toggleFetchingAC());harnessApi.getHarnessList().then(function(data){dispatch(setListAC(data));dispatch(toggleFetchingAC());}).catch(function(err){handle401(err,dispatch);});};};var getChartByNumberThunk=function getChartByNumberThunk(number){return function(dispatch){dispatch(toggleMapFetchingAC());harness_chart_api.getHarnessChartByNumber(number).then(function(data){dispatch(setMapAC(data));dispatch(toggleMapFetchingAC());}).catch(function(err){handle401(err,dispatch);});};};var deleteHarnessByNumberThunk=function deleteHarnessByNumberThunk(number){return function(dispatch){dispatch(toggleFetchingAC());harnessApi.deleteHarnessByNumber(number).then(function(data){dispatch(toggleFetchingAC());dispatch(getHarnessesListThunk());}).catch(function(err){handle401(err,dispatch);});};};export{harnessesReducer,getHarnessesListThunk,deleteHarnessByNumberThunk,getChartByNumberThunk};","map":{"version":3,"sources":["/home/german/PycharmProjects/komax_prettl/PrettlNKKomax/frontend/src/reducers/harnessesReducer.js"],"names":["harnessApi","harness_chart_api","handle401","initialState","isFetching","harnessesList","isMapFetching","selectedMap","TOGGLE_FETCHING","TOGGLE_MAP_FETCHING","SET_HARNESSES_LIST","SET_SELECTED_MAP","harnessesReducer","state","action","stateCopy","type","list","map","toggleFetchingAC","toggleMapFetchingAC","setListAC","setMapAC","getHarnessesListThunk","dispatch","getHarnessList","then","data","catch","err","getChartByNumberThunk","number","getHarnessChartByNumber","deleteHarnessByNumberThunk","deleteHarnessByNumber"],"mappings":"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","sourcesContent":["import harnessApi from \"../DAL/harness/harnessApi\";\nimport harness_chart_api from \"../DAL/harness_chart/harness_chart_api\";\nimport handle401 from \"./handle401\";\n\nlet initialState = {\n    isFetching : false,\n    harnessesList : [],\n    isMapFetching : false,\n    selectedMap : []\n}\n\nconst TOGGLE_FETCHING = \"HARNESS/FETCHING\";\nconst TOGGLE_MAP_FETCHING = \"HARNESS/MAP_FETCHING\";\nconst SET_HARNESSES_LIST = \"HARNESS/SET_LIST\";\nconst SET_SELECTED_MAP = \"HARNESS/SET_MAP\";\n\nlet harnessesReducer = (state = initialState, action) => {\n    let stateCopy = {...state};\n    switch (action.type) {\n        case TOGGLE_FETCHING : {\n            stateCopy.isFetching = !stateCopy.isFetching;\n            break;\n        }\n        case TOGGLE_MAP_FETCHING : {\n            stateCopy.isMapFetching = !stateCopy.isMapFetching;\n            break;\n        }\n        case SET_HARNESSES_LIST : {\n            stateCopy.harnessesList = action.list;\n            break;\n        }\n        case SET_SELECTED_MAP : {\n            stateCopy.selectedMap = action.map;\n            break;\n        }\n    }\n\n    return stateCopy;\n}\n\nlet toggleFetchingAC = () => {\n    return {\n        type : TOGGLE_FETCHING\n    }\n}\n\nlet toggleMapFetchingAC = () => {\n    return {\n        type : TOGGLE_MAP_FETCHING\n    }\n}\n\nlet setListAC = (list) => {\n    return {\n        type : SET_HARNESSES_LIST,\n        list : list\n    }\n}\n\nlet setMapAC = (map) => {\n    return {\n        type : SET_SELECTED_MAP,\n        map : map\n    }\n}\n\nlet getHarnessesListThunk = () => {\n    return (dispatch) => {\n        dispatch(toggleFetchingAC());\n        harnessApi.getHarnessList()\n            .then(data => {\n                dispatch(setListAC(data));\n                dispatch(toggleFetchingAC());\n            })\n            .catch(err => {\n                handle401(err, dispatch)\n            })\n    }\n}\n\nlet getChartByNumberThunk = (number) => {\n    return (dispatch) => {\n        dispatch(toggleMapFetchingAC());\n        harness_chart_api.getHarnessChartByNumber(number)\n            .then(data => {\n                dispatch(setMapAC(data));\n                dispatch(toggleMapFetchingAC());\n            })\n            .catch(err => {\n                handle401(err, dispatch)\n            });\n    }\n}\n\nlet deleteHarnessByNumberThunk = (number) => {\n    return (dispatch) => {\n        dispatch(toggleFetchingAC());\n        harnessApi.deleteHarnessByNumber(number)\n            .then(data => {\n                dispatch(toggleFetchingAC());\n                dispatch(getHarnessesListThunk());\n            })\n            .catch(err => {\n                handle401(err, dispatch)\n            });\n    }\n}\n\nexport {harnessesReducer, getHarnessesListThunk, deleteHarnessByNumberThunk, getChartByNumberThunk}"]},"metadata":{},"sourceType":"module"}
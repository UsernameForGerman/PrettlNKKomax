{"ast":null,"code":"import React,{useEffect}from\"react\";import TasksPage from\"./TasksPage\";import auth from\"../AuthHOC/authHOC\";import TaskItem from\"./TaskItem/TaskItem\";import classes from\"./TasksPage.module.css\";import{connect}from\"react-redux\";import TasksSelector from\"../../selectors/tasksSelector\";import{deleteTaskThunk,getTasksThunk}from\"../../reducers/tasksReducer\";import FullScreenPreloader from\"../common/Preloader/FullScreenPreloader\";import LoginSelector from\"../../selectors/loginSelector\";var TasksPageContainer=function TasksPageContainer(props){var user={username:props.login};useEffect(function(){props.fetchList();},props.tasksList.length);var items=props.tasksList.sort(function(a,b){return Number(b.task_name)-Number(a.task_name);}).map(function(elem){return/*#__PURE__*/React.createElement(TaskItem,Object.assign({},elem,{role:props.role,komax:props.komax,delete:props.deleteTask}));});var renderRows=function renderRows(items){var rows=[];var row=[];for(var i=0;i<items.length;i++){row.push(items[i]);if(i%3===2){rows.push(/*#__PURE__*/React.createElement(\"div\",{className:classes.recentTasks},row));row=[];}}if(row.length>0){rows.push(/*#__PURE__*/React.createElement(\"div\",{className:classes.recentTasks},row));}return rows;};return/*#__PURE__*/React.createElement(React.Fragment,null,props.isFetching?/*#__PURE__*/React.createElement(FullScreenPreloader,null):/*#__PURE__*/React.createElement(TasksPage,Object.assign({rows:renderRows(items)},user,{role:props.role})));};var mapStateToProps=function mapStateToProps(state){return{isFetching:TasksSelector.getFetching(state),tasksList:TasksSelector.getList(state),login:LoginSelector.getLogin(state),role:LoginSelector.getRole(state),komax:LoginSelector.getKomax(state)};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{fetchList:function fetchList(){dispatch(getTasksThunk());},deleteTask:function deleteTask(task){dispatch(deleteTaskThunk(task));}};};export default auth(connect(mapStateToProps,mapDispatchToProps)(TasksPageContainer));","map":{"version":3,"sources":["/home/german/PycharmProjects/komax_prettl/PrettlNKKomax/frontend/src/comp/Tasks/TasksPageContainer.js"],"names":["React","useEffect","TasksPage","auth","TaskItem","classes","connect","TasksSelector","deleteTaskThunk","getTasksThunk","FullScreenPreloader","LoginSelector","TasksPageContainer","props","user","username","login","fetchList","tasksList","length","items","sort","a","b","Number","task_name","map","elem","role","komax","deleteTask","renderRows","rows","row","i","push","recentTasks","isFetching","mapStateToProps","state","getFetching","getList","getLogin","getRole","getKomax","mapDispatchToProps","dispatch","task"],"mappings":"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","sourcesContent":["import React, {useEffect} from \"react\";\nimport TasksPage from \"./TasksPage\";\nimport auth from \"../AuthHOC/authHOC\";\nimport TaskItem from \"./TaskItem/TaskItem\";\nimport classes from \"./TasksPage.module.css\"\nimport {connect} from \"react-redux\";\nimport TasksSelector from \"../../selectors/tasksSelector\";\nimport {deleteTaskThunk, getTasksThunk} from \"../../reducers/tasksReducer\";\nimport FullScreenPreloader from \"../common/Preloader/FullScreenPreloader\";\nimport LoginSelector from \"../../selectors/loginSelector\";\n\nlet TasksPageContainer = (props) => {\n    let user = {\n        username : props.login\n    }\n    useEffect(() => {\n        props.fetchList();\n    }, props.tasksList.length);\n\n    let items = props.tasksList.sort((a,b) => {\n        return Number(b.task_name) - Number(a.task_name);\n    }).map(elem => {\n        return (\n            <TaskItem {...elem} role={props.role} komax={props.komax} delete={props.deleteTask}/>\n        );\n    });\n\n    let renderRows = (items) => {\n        let rows = [];\n        let row = [];\n        for (let i = 0; i < items.length; i++){\n            row.push(items[i]);\n            if (i % 3 === 2){\n                rows.push(\n                    (\n                        <div className={classes.recentTasks}>\n                            {row}\n                        </div>\n                    )\n                );\n                row = [];\n            }\n        }\n        if (row.length > 0){\n            rows.push(\n                (\n                    <div className={classes.recentTasks}>\n                        {row}\n                    </div>\n                )\n            );\n        }\n\n        return rows;\n    }\n\n    return(\n        <>\n            {props.isFetching\n                ? <FullScreenPreloader/>\n                : <TasksPage rows={renderRows(items)} {...user} role={props.role}/>\n            }\n        </>\n    )\n}\n\nlet mapStateToProps = (state) => {\n    return {\n        isFetching : TasksSelector.getFetching(state),\n        tasksList : TasksSelector.getList(state),\n        login : LoginSelector.getLogin(state),\n        role : LoginSelector.getRole(state),\n        komax : LoginSelector.getKomax(state)\n    }\n}\n\nlet mapDispatchToProps = (dispatch) => {\n    return {\n        fetchList: () => {\n            dispatch(getTasksThunk())\n        },\n\n        deleteTask: (task) => {\n            dispatch(deleteTaskThunk(task))\n        }\n    }\n}\n\nexport default auth(connect(mapStateToProps, mapDispatchToProps)(TasksPageContainer));"]},"metadata":{},"sourceType":"module"}
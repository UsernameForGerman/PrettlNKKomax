{"ast":null,"code":"import axios from \"axios\";\nimport BASE_URL from \"../getBaseUrl\";\nconst API_URL = BASE_URL + \"api/v1/\";\n\nclass API {\n  constructor(base_url) {\n    this.getToken = () => {\n      let token = window.localStorage.getItem('token');\n\n      if (!token) {\n        token = \"null\";\n      }\n\n      return token;\n    };\n\n    this.createAPI = (baseUrl = API_URL) => {\n      let token = this.getToken();\n\n      if (token === \"null\") {\n        return axios.create({\n          baseURL: baseUrl,\n          headers: {\n            \"Content-Type\": \"application/json\"\n          }\n        });\n      } else {\n        return axios.create({\n          baseURL: baseUrl,\n          headers: {\n            \"Authorization\": `Token ${token}`,\n            \"Content-Type\": \"application/json\"\n          }\n        });\n      }\n    };\n\n    this.createMediaAPI = () => {\n      let token = this.getToken();\n\n      if (token === \"null\") {\n        return axios.create({\n          baseURL: API_URL,\n          headers: {\n            \"Content-Type\": \"multipart/form-data\"\n          }\n        });\n      } else {\n        return axios.create({\n          baseURL: API_URL,\n          headers: {\n            \"Authorization\": `Token ${token}`,\n            \"Content-Type\": \"multipart/form-data\"\n          }\n        });\n      }\n    };\n\n    this.formIdUrl = id => {\n      return this.base_url + id;\n    };\n\n    this.getObjectList = (params = \"\") => {\n      return this.createAPI().get(this.base_url + params).then(resp => {\n        let data = resp.data;\n        return data;\n      });\n    };\n\n    this.getObjectById = (id, url = this.formIdUrl(id)) => {\n      return this.createAPI().get(this.formIdUrl(id)).then(resp => {\n        return resp.data;\n      });\n    };\n\n    this.createObject = (options, url = \"\", api = this.createAPI()) => {\n      return api.post(this.base_url + url, options).then(resp => {\n        return resp.data;\n      });\n    };\n\n    this.deleteObject = (id, options) => {\n      return this.createAPI().delete(this.formIdUrl(id), options).then(resp => {\n        return resp.data;\n      });\n    };\n\n    this.updateObject = (id, options) => {\n      return this.createAPI().put(this.formIdUrl(id) + \"/\", options).then(resp => {\n        return resp;\n      });\n    };\n\n    this.base_url = API_URL + base_url;\n  }\n\n}\n\nexport default API;","map":{"version":3,"sources":["/home/whatruska/PycharmProjects/PrettlNKKomax/frontend/src/DAL/api/api.js"],"names":["axios","BASE_URL","API_URL","API","constructor","base_url","getToken","token","window","localStorage","getItem","createAPI","baseUrl","create","baseURL","headers","createMediaAPI","formIdUrl","id","getObjectList","params","get","then","resp","data","getObjectById","url","createObject","options","api","post","deleteObject","delete","updateObject","put"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport BASE_URL from \"../getBaseUrl\";\n\nconst API_URL = BASE_URL + \"api/v1/\";\n\nclass API {\n    constructor(base_url) {\n        this.base_url = API_URL + base_url;\n    }\n\n    getToken = () => {\n        let token = window.localStorage.getItem('token');\n        if (!token){\n            token = \"null\";\n        }\n        return token;\n    }\n\n    createAPI = (baseUrl = API_URL) => {\n        let token = this.getToken();\n        if (token === \"null\"){\n            return axios.create({\n                baseURL : baseUrl,\n                headers : {\n                    \"Content-Type\" : \"application/json\"\n                }\n            });\n        } else {\n           return axios.create({\n                baseURL : baseUrl,\n                headers : {\n                    \"Authorization\": `Token ${token}`,\n                    \"Content-Type\" : \"application/json\",\n                }\n            });\n        }\n    }\n\n    createMediaAPI = () => {\n        let token = this.getToken();\n        if (token === \"null\"){\n            return axios.create({\n                baseURL : API_URL,\n                headers : {\n                    \"Content-Type\" : \"multipart/form-data\"\n                }\n            });\n        } else {\n           return axios.create({\n                baseURL : API_URL,\n                headers : {\n                    \"Authorization\": `Token ${token}`,\n                    \"Content-Type\" : \"multipart/form-data\",\n                }\n            });\n        }\n    }\n\n    formIdUrl = (id) => {\n        return this.base_url + id;\n    }\n\n    getObjectList = (params=\"\") => {\n        return this.createAPI().get(this.base_url + params).then((resp) => {\n            let data = resp.data;\n            return data;\n        });\n    }\n\n    getObjectById = (id, url = this.formIdUrl(id)) => {\n        return this.createAPI().get(this.formIdUrl(id)).then((resp) => {\n            return resp.data;\n        });\n    }\n\n    createObject = (options, url = \"\", api = this.createAPI()) => {\n        return api.post(this.base_url + url, options).then((resp) => {\n            return resp.data;\n        });\n    }\n\n    deleteObject = (id, options) => {\n        return this.createAPI().delete(this.formIdUrl(id), options).then((resp) => {\n            return resp.data;\n        });\n    }\n\n    updateObject = (id, options) => {\n        return this.createAPI().put(this.formIdUrl(id) + \"/\", options).then(resp => {\n            return resp;\n        })\n    }\n}\n\nexport default API;"]},"metadata":{},"sourceType":"module"}
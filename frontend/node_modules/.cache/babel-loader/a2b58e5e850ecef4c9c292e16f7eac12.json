{"ast":null,"code":"import _slicedToArray from\"/home/whatruska/PycharmProjects/PrettlNKKomax/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import KomaxTerminal from\"./KomaxTerminal\";import React,{useEffect,useState}from\"react\";import KomaxTerminalTableItem from\"./KomaxTerminalTable/Item/KTTItem\";import auth from\"../AuthHOC/authHOC\";import TerminalSelector from\"../../selectors/terminalSelector\";import{connect}from\"react-redux\";import{deleteTerminalThunk,getTerminalListThunk,updateTerminalThunk}from\"../../reducers/komaxTerminalReducer\";import FullScreenPreloader from\"../common/Preloader/FullScreenPreloader\";var KomaxTerminalContainer=function KomaxTerminalContainer(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),selectedTerminal=_useState2[0],setSelectedTerminal=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),materialValue=_useState4[0],setMaterialValue=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),terminalAvaliable=_useState6[0],setTerminalAvaliable=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isModalOpen=_useState8[0],setIsModalOpen=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isCreateOpen=_useState10[0],setCreateOpen=_useState10[1];var openCreate=function openCreate(e){setCreateOpen(true);};var closeCreate=function closeCreate(e){setCreateOpen(false);};var closeModal=function closeModal(e){setIsModalOpen(false);};var openModal=function openModal(e){setIsModalOpen(true);};useEffect(function(){props.fetchList();},props.terminalList.length);var list=props.terminalList;if(!list){list=[];}var items=list.map(function(item){var select=function select(){setSelectedTerminal(item);setMaterialValue(item.seal_installed);setTerminalAvaliable(item.terminal_avaliable);openModal();};var del=function del(e){e.stopPropagation();props.deleteTerminal(item);};return/*#__PURE__*/React.createElement(KomaxTerminalTableItem,Object.assign({},item,{select:select,del:del}));});return/*#__PURE__*/React.createElement(React.Fragment,null,props.isFetching?/*#__PURE__*/React.createElement(FullScreenPreloader,null):/*#__PURE__*/React.createElement(KomaxTerminal,{items:items,selected:selectedTerminal,setMaterial:setMaterialValue,setTerminal:setTerminalAvaliable,terminalAvaliable:terminalAvaliable,materialValue:materialValue,isModalOpen:isModalOpen,setIsModalOpen:setIsModalOpen,closeModal:closeModal,isCreateOpen:isCreateOpen,openCreate:openCreate,closeCreate:closeCreate,updateTerminal:props.updateTerminal,deleteTerminal:props.deleteTerminal}));};var mapStateToProps=function mapStateToProps(state){return{terminalList:TerminalSelector.getList(state),isFetching:TerminalSelector.getFetching(state)};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{fetchList:function fetchList(){dispatch(getTerminalListThunk());},updateTerminal:function updateTerminal(terminal){dispatch(updateTerminalThunk(terminal));},deleteTerminal:function deleteTerminal(terminal){dispatch(deleteTerminalThunk(terminal));}};};export default auth(connect(mapStateToProps,mapDispatchToProps)(KomaxTerminalContainer));","map":{"version":3,"sources":["/home/whatruska/PycharmProjects/PrettlNKKomax/frontend/src/comp/Komax terminal/KomaxTerminalContainer.js"],"names":["KomaxTerminal","React","useEffect","useState","KomaxTerminalTableItem","auth","TerminalSelector","connect","deleteTerminalThunk","getTerminalListThunk","updateTerminalThunk","FullScreenPreloader","KomaxTerminalContainer","props","selectedTerminal","setSelectedTerminal","materialValue","setMaterialValue","terminalAvaliable","setTerminalAvaliable","isModalOpen","setIsModalOpen","isCreateOpen","setCreateOpen","openCreate","e","closeCreate","closeModal","openModal","fetchList","terminalList","length","list","items","map","item","select","seal_installed","terminal_avaliable","del","stopPropagation","deleteTerminal","isFetching","updateTerminal","mapStateToProps","state","getList","getFetching","mapDispatchToProps","dispatch","terminal"],"mappings":"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","sourcesContent":["import KomaxTerminal from \"./KomaxTerminal\";\nimport React, {useEffect, useState} from \"react\";\nimport KomaxTerminalTableItem from \"./KomaxTerminalTable/Item/KTTItem\";\nimport auth from \"../AuthHOC/authHOC\";\nimport TerminalSelector from \"../../selectors/terminalSelector\";\nimport {connect} from \"react-redux\";\nimport {deleteTerminalThunk, getTerminalListThunk, updateTerminalThunk} from \"../../reducers/komaxTerminalReducer\";\nimport FullScreenPreloader from \"../common/Preloader/FullScreenPreloader\";\n\nlet KomaxTerminalContainer = (props) => {\n    const [selectedTerminal, setSelectedTerminal] = useState({});\n    const [materialValue, setMaterialValue] = useState();\n    const [terminalAvaliable, setTerminalAvaliable] = useState();\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [isCreateOpen, setCreateOpen] = useState(false);\n\n    let openCreate = (e) => {\n        setCreateOpen(true);\n    }\n\n    let closeCreate = (e) => {\n        setCreateOpen(false);\n    }\n\n    let closeModal = (e) => {\n        setIsModalOpen(false);\n    }\n\n    let openModal = (e) => {\n        setIsModalOpen(true);\n    }\n\n    useEffect(() => {\n        props.fetchList();\n    }, props.terminalList.length)\n\n    let list = props.terminalList;\n    if (!list){\n        list = [];\n    }\n    let items = list.map((item) => {\n        let select = () => {\n            setSelectedTerminal(item);\n            setMaterialValue(item.seal_installed);\n            setTerminalAvaliable(item.terminal_avaliable);\n            openModal();\n        }\n\n        let del = (e) => {\n            e.stopPropagation();\n            props.deleteTerminal(item);\n        }\n        return (\n            <KomaxTerminalTableItem {...item} select={select} del={del}/>\n        )\n    })\n\n    return(\n        <>\n            {props.isFetching\n                ? <FullScreenPreloader/>\n                : <KomaxTerminal items={items}\n                       selected={selectedTerminal}\n                       setMaterial={setMaterialValue}\n                       setTerminal={setTerminalAvaliable}\n                       terminalAvaliable={terminalAvaliable}\n                       materialValue={materialValue}\n                       isModalOpen={isModalOpen}\n                       setIsModalOpen={setIsModalOpen}\n                       closeModal={closeModal}\n                       isCreateOpen={isCreateOpen}\n                       openCreate={openCreate}\n                       closeCreate={closeCreate}\n                       updateTerminal={props.updateTerminal}\n                       deleteTerminal={props.deleteTerminal}\n                />\n            }\n        </>\n    )\n}\n\nlet mapStateToProps = (state) => {\n    return {\n        terminalList : TerminalSelector.getList(state),\n        isFetching : TerminalSelector.getFetching(state)\n    }\n}\n\nlet mapDispatchToProps = (dispatch) => {\n    return{\n        fetchList : () => {\n            dispatch(getTerminalListThunk())\n        },\n\n        updateTerminal : (terminal) => {\n            dispatch(updateTerminalThunk(terminal))\n        },\n\n        deleteTerminal : (terminal) => {\n            dispatch(deleteTerminalThunk(terminal))\n        }\n    }\n}\n\nexport default auth(connect(mapStateToProps, mapDispatchToProps)(KomaxTerminalContainer));"]},"metadata":{},"sourceType":"module"}
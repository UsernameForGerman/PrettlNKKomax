{"ast":null,"code":"var _jsxFileName = \"/home/whatruska/PycharmProjects/PrettlNKKomax/frontend/src/comp/AuthHOC/authHOC.js\";\nimport React from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport get_pages from \"./get_pages\";\n\nlet auth = Component => {\n  return props => {\n    let storage = window.localStorage;\n    let pathname = window.location.pathname;\n    let index = pathname.toString().substr(1).indexOf('/');\n    let path = window.location.pathname.toString().substr(1, index > 0 ? index : pathname.length);\n    let token = storage.getItem('token');\n    let role = storage.getItem('role');\n    let availPages = get_pages(role);\n\n    if (token !== null && (path === 'account' || path === '' || availPages.includes(path))) {\n      return /*#__PURE__*/React.createElement(Component, Object.assign({}, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 15,\n          columnNumber: 17\n        }\n      }));\n    } else {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 19,\n          columnNumber: 17\n        }\n      });\n    }\n  };\n};\n\nexport default auth;","map":{"version":3,"sources":["/home/whatruska/PycharmProjects/PrettlNKKomax/frontend/src/comp/AuthHOC/authHOC.js"],"names":["React","Redirect","get_pages","auth","Component","props","storage","window","localStorage","pathname","location","index","toString","substr","indexOf","path","length","token","getItem","role","availPages","includes"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,QAAR,QAAuB,kBAAvB;AACA,OAAOC,SAAP,MAAsB,aAAtB;;AACA,IAAIC,IAAI,GAAIC,SAAD,IAAe;AACtB,SAAQC,KAAD,IAAW;AACd,QAAIC,OAAO,GAAGC,MAAM,CAACC,YAArB;AACA,QAAIC,QAAQ,GAAGF,MAAM,CAACG,QAAP,CAAgBD,QAA/B;AACA,QAAIE,KAAK,GAAGF,QAAQ,CAACG,QAAT,GAAoBC,MAApB,CAA2B,CAA3B,EAA8BC,OAA9B,CAAsC,GAAtC,CAAZ;AACA,QAAIC,IAAI,GAAGR,MAAM,CAACG,QAAP,CAAgBD,QAAhB,CAAyBG,QAAzB,GAAoCC,MAApC,CAA2C,CAA3C,EAA8CF,KAAK,GAAG,CAAR,GAAYA,KAAZ,GAAoBF,QAAQ,CAACO,MAA3E,CAAX;AACA,QAAIC,KAAK,GAAGX,OAAO,CAACY,OAAR,CAAgB,OAAhB,CAAZ;AACA,QAAIC,IAAI,GAAGb,OAAO,CAACY,OAAR,CAAgB,MAAhB,CAAX;AACA,QAAIE,UAAU,GAAGlB,SAAS,CAACiB,IAAD,CAA1B;;AACA,QAAIF,KAAK,KAAK,IAAV,KAAmBF,IAAI,KAAK,SAAT,IAAsBA,IAAI,KAAK,EAA/B,IAAqCK,UAAU,CAACC,QAAX,CAAoBN,IAApB,CAAxD,CAAJ,EAAuF;AACnF,0BACI,oBAAC,SAAD,oBAAeV,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADJ;AAGH,KAJD,MAIO;AACH,0BACI,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAE,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAGH;AACJ,GAjBD;AAkBH,CAnBD;;AAqBA,eAAeF,IAAf","sourcesContent":["import React from \"react\";\nimport {Redirect} from \"react-router-dom\";\nimport get_pages from \"./get_pages\"\nlet auth = (Component) => {\n    return (props) => {\n        let storage = window.localStorage;\n        let pathname = window.location.pathname;\n        let index = pathname.toString().substr(1).indexOf('/');\n        let path = window.location.pathname.toString().substr(1, index > 0 ? index : pathname.length);\n        let token = storage.getItem('token');\n        let role = storage.getItem('role');\n        let availPages = get_pages(role);\n        if (token !== null && (path === 'account' || path === '' || availPages.includes(path))){\n            return(\n                <Component {...props}/>\n            );\n        } else {\n            return (\n                <Redirect to={\"/login\"}/>\n            )\n        }\n    }\n}\n\nexport default auth;"]},"metadata":{},"sourceType":"module"}
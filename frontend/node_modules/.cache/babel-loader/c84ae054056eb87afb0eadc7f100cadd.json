{"ast":null,"code":"import React from\"react\";import{Redirect}from\"react-router-dom\";import get_pages from\"./get_pages\";var auth=function auth(Component){return function(props){var storage=window.localStorage;var pathname=window.location.pathname;var index=pathname.toString().substr(1).indexOf('/');var path=window.location.pathname.toString().substr(1,index>0?index:pathname.length);var token=storage.getItem('token');var role=storage.getItem('role');var availPages=get_pages(role);if(token!==null&&(path==='account'||path===''||availPages.includes(path))){return/*#__PURE__*/React.createElement(Component,props);}else{return/*#__PURE__*/React.createElement(Redirect,{to:\"/login\"});}};};export default auth;","map":{"version":3,"sources":["/home/whatruska/PycharmProjects/PrettlNKKomax/frontend/src/comp/AuthHOC/authHOC.js"],"names":["React","Redirect","get_pages","auth","Component","props","storage","window","localStorage","pathname","location","index","toString","substr","indexOf","path","length","token","getItem","role","availPages","includes"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,QAAR,KAAuB,kBAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,GAAIC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,CAACC,SAAD,CAAe,CACtB,MAAO,UAACC,KAAD,CAAW,CACd,GAAIC,CAAAA,OAAO,CAAGC,MAAM,CAACC,YAArB,CACA,GAAIC,CAAAA,QAAQ,CAAGF,MAAM,CAACG,QAAP,CAAgBD,QAA/B,CACA,GAAIE,CAAAA,KAAK,CAAGF,QAAQ,CAACG,QAAT,GAAoBC,MAApB,CAA2B,CAA3B,EAA8BC,OAA9B,CAAsC,GAAtC,CAAZ,CACA,GAAIC,CAAAA,IAAI,CAAGR,MAAM,CAACG,QAAP,CAAgBD,QAAhB,CAAyBG,QAAzB,GAAoCC,MAApC,CAA2C,CAA3C,CAA8CF,KAAK,CAAG,CAAR,CAAYA,KAAZ,CAAoBF,QAAQ,CAACO,MAA3E,CAAX,CACA,GAAIC,CAAAA,KAAK,CAAGX,OAAO,CAACY,OAAR,CAAgB,OAAhB,CAAZ,CACA,GAAIC,CAAAA,IAAI,CAAGb,OAAO,CAACY,OAAR,CAAgB,MAAhB,CAAX,CACA,GAAIE,CAAAA,UAAU,CAAGlB,SAAS,CAACiB,IAAD,CAA1B,CACA,GAAIF,KAAK,GAAK,IAAV,GAAmBF,IAAI,GAAK,SAAT,EAAsBA,IAAI,GAAK,EAA/B,EAAqCK,UAAU,CAACC,QAAX,CAAoBN,IAApB,CAAxD,CAAJ,CAAuF,CACnF,mBACI,oBAAC,SAAD,CAAeV,KAAf,CADJ,CAGH,CAJD,IAIO,CACH,mBACI,oBAAC,QAAD,EAAU,EAAE,CAAE,QAAd,EADJ,CAGH,CACJ,CAjBD,CAkBH,CAnBD,CAqBA,cAAeF,CAAAA,IAAf","sourcesContent":["import React from \"react\";\nimport {Redirect} from \"react-router-dom\";\nimport get_pages from \"./get_pages\"\nlet auth = (Component) => {\n    return (props) => {\n        let storage = window.localStorage;\n        let pathname = window.location.pathname;\n        let index = pathname.toString().substr(1).indexOf('/');\n        let path = window.location.pathname.toString().substr(1, index > 0 ? index : pathname.length);\n        let token = storage.getItem('token');\n        let role = storage.getItem('role');\n        let availPages = get_pages(role);\n        if (token !== null && (path === 'account' || path === '' || availPages.includes(path))){\n            return(\n                <Component {...props}/>\n            );\n        } else {\n            return (\n                <Redirect to={\"/login\"}/>\n            )\n        }\n    }\n}\n\nexport default auth;"]},"metadata":{},"sourceType":"module"}